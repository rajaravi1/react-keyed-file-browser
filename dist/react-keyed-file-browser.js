!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-keyed-file-browser"]=t():e["react-keyed-file-browser"]=t()}(self,(()=>(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BaseFile:()=>K,BaseFileConnectors:()=>I,BaseFolder:()=>ge,BaseFolderConnectors:()=>ue,Details:()=>r,FileRenderers:()=>i,Filters:()=>n,FolderRenderers:()=>l,Groupers:()=>a,Headers:()=>s,Icons:()=>d,RawFileBrowser:()=>Et,Sorters:()=>c,Utils:()=>o,default:()=>St});var r={};e.r(r),e.d(r,{DefaultDetail:()=>y});var n={};e.r(n),e.d(n,{DefaultFilter:()=>P,DefaultFilterLogic:()=>R});var o={};e.r(o),e.d(o,{isFolder:()=>N,moveFilesAndFolders:()=>k});var s={};e.r(s),e.d(s,{TableHeader:()=>q});var i={};e.r(i),e.d(i,{ListThumbnailFile:()=>Q,RawListThumbnailFile:()=>J,RawTableFile:()=>de,SimpleListThumbnailFile:()=>ie,TableFile:()=>pe});var l={};e.r(l),e.d(l,{ListThumbnailFolder:()=>Se,RawListThumbnailFolder:()=>Ce,RawTableFolder:()=>Ne,TableFolder:()=>ke});var a={};e.r(a),e.d(a,{GroupByFolder:()=>$e,GroupByModifiedRelative:()=>Ze});var c={};e.r(c),e.d(c,{SortByModified:()=>it,SortByName:()=>ot});var d={};e.r(d),e.d(d,{FontAwesome:()=>Ct});const p=require("prop-types");var h=e.n(p);const m=require("react");var f=e.n(m);const u=require("react-dnd"),g=require("react-dnd-html5-backend");var F=Object.defineProperty,b=(e,t,r)=>(((e,t,r)=>{t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class w extends f().Component{constructor(){super(...arguments),b(this,"handleCloseClick",(e=>{e&&e.preventDefault(),this.props.close()}))}render(){let e=this.props.file.key.split("/");return e=e.length?e[e.length-1]:"",f().createElement("div",null,f().createElement("h2",null,"Item Detail"),f().createElement("dl",null,f().createElement("dt",null,"Key"),f().createElement("dd",null,this.props.file.key),f().createElement("dt",null,"Name"),f().createElement("dd",null,e)),f().createElement("a",{href:"#",onClick:this.handleCloseClick},"Close"))}}b(w,"propTypes",{file:h().shape({key:h().string.isRequired,name:h().string.isRequired,extension:h().string.isRequired,url:h().string}).isRequired,close:h().func});const y=w;var v=Object.defineProperty,D=(e,t,r)=>(((e,t,r)=>{t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class E extends f().Component{constructor(){super(...arguments),D(this,"handleFilterChange",(e=>{const t=e.target.value;this.props.updateFilter(t)}))}render(){return f().createElement("input",{type:"search",placeholder:"Filter files",value:this.props.value,onChange:this.handleFilterChange})}}D(E,"propTypes",{value:h().string.isRequired,updateFilter:h().func});const P=E,R=(e,t)=>{const r=[],n=e.toLowerCase().split(" ");return t.map((e=>{let t=!1;n.map((r=>{-1===e.key.toLowerCase().trim().indexOf(r)&&(t=!0)})),t||r.push(e)})),r},C=require("classnames");var S=e.n(C);function N(e){return e.key.endsWith("/")}function k(e,t,r){if(!t.didDrop())return;const n=t.getDropResult(),o=[],s=[];e.browserProps.selection.forEach((e=>{"/"===e[e.length-1]?o.push(e):s.push(e)})),e.browserProps.openFolder(n.path),o.forEach((t=>{const r=t,o=r.split("/"),s=o[o.length-2],i=`${n.path}${s}/`;i.substr(0,r.length)!==r&&i!==r&&e.browserProps.moveFolder&&e.browserProps.moveFolder(r,i)})),s.forEach((t=>{const r=t,o=r.split("/"),s=o[o.length-1],i=`${n.path}${s}`;i!==r&&e.browserProps.moveFile&&e.browserProps.moveFile(r,i)}))}const O={Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]},T={};for(const[e,t]of Object.entries(O))for(const r of t)T[r]=e;var A=Object.defineProperty,j=(e,t,r)=>(((e,t,r)=>{t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class M extends f().Component{constructor(){super(...arguments),j(this,"state",{newName:this.getName()}),j(this,"handleFileClick",(e=>{e&&e.preventDefault(),this.props.browserProps.preview({url:this.props.url,name:this.getName(),key:this.props.fileKey,extension:this.getExtension()})})),j(this,"handleItemClick",(e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"file",e.ctrlKey||e.metaKey,e.shiftKey)})),j(this,"handleItemDoubleClick",(e=>{e.stopPropagation(),this.handleFileClick()})),j(this,"handleRenameClick",(e=>{this.props.browserProps.renameFile&&this.props.browserProps.beginAction("rename",this.props.fileKey)})),j(this,"handleNewNameChange",(e=>{const t=e.target.value;this.setState({newName:t})})),j(this,"handleRenameSubmit",(e=>{if(e&&e.preventDefault(),!this.props.browserProps.renameFile)return;const t=this.state.newName.trim();if(0===t.length)return;if(["/","\\"].some((e=>-1!==t.indexOf(e))))return;let r=t;const n=this.props.fileKey.lastIndexOf("/");-1!==n&&(r=`${this.props.fileKey.substr(0,n)}/${t}`),this.props.browserProps.renameFile(this.props.fileKey,r)})),j(this,"handleDeleteClick",(e=>{this.props.browserProps.deleteFile&&this.props.browserProps.beginAction("delete",this.props.fileKey)})),j(this,"handleDeleteSubmit",(e=>{e.preventDefault(),this.props.browserProps.deleteFile&&this.props.browserProps.deleteFile(this.props.browserProps.actionTargets)})),j(this,"handleCancelEdit",(e=>{this.props.browserProps.endAction()}))}selectFileNameFromRef(e){if(e){const t=e.value,r=t.lastIndexOf(".");e.setSelectionRange(0,r||t.length),e.focus()}}getName(){let e=this.props.newKey||this.props.fileKey;const t=e.lastIndexOf("/");return-1!==t&&(e=e.substr(t+1)),e}getExtension(){const e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}getFileType(){return T[this.getExtension()]||"File"}connectDND(e){const t=this.props.isDragging||this.props.action;return"function"!=typeof this.props.browserProps.moveFile||t||this.props.isRenaming||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFile&&"function"!=typeof this.props.browserProps.moveFolder||(e=this.props.connectDropTarget(e)),e}}j(M,"propTypes",{fileKey:h().string,url:h().string,newKey:h().string,isRenaming:h().bool,connectDragSource:h().func,connectDropTarget:h().func,isDragging:h().bool,action:h().string,browserProps:h().shape({icons:h().object,select:h().func,beginAction:h().func,endAction:h().func,preview:h().func,createFiles:h().func,moveFile:h().func,moveFolder:h().func,renameFile:h().func,deleteFile:h().func})});const x={drop(e,t){if(t.didDrop())return;const r=e.newKey||e.fileKey,n=r.lastIndexOf("/"),o=-1!==n?r.substr(0,n+1):"",s=t.getItem();return s.files&&e.browserProps.createFiles&&e.browserProps.createFiles(s.files,o),{path:o}}},I={dragSource:{beginDrag:e=>(e.browserProps.selection.length&&e.browserProps.selection.includes(e.fileKey)||e.browserProps.select(e.fileKey,"file"),{key:e.fileKey}),endDrag(e,t,r){k(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},targetSource:x,targetCollect:function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}}},K=M;var B=Object.defineProperty;class L extends f().Component{handleHeaderClick(e){this.props.select(this.props.fileKey)}render(){const e=f().createElement("tr",{className:S()("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},f().createElement("th",null,"File"),f().createElement("th",{className:"size"},"Size"),f().createElement("th",{className:"modified"},"Last Modified"));return"function"==typeof this.props.browserProps.createFiles||"function"==typeof this.props.browserProps.moveFile||"function"==typeof this.props.browserProps.moveFolder?this.props.connectDropTarget(e):e}}((e,t,r)=>{t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(L,"propTypes"+"",{select:h().func,fileKey:h().string,connectDropTarget:h().func,isOver:h().bool,isSelected:h().func,browserProps:h().shape({createFiles:h().func,moveFolder:h().func,moveFile:h().func})});const q=(0,u.DropTarget)(["file","folder",g.NativeTypes.FILE],I.targetSource,I.targetCollect)(L),_=require("date-fns"),z=require("lodash/flow");var $=e.n(z);function W(e){if(e>1024){const t=e/1024;return t>1024?`${function(e,t){if(e=parseFloat(e),isNaN(e))return parseFloat("0").toFixed(2);{const t=Math.pow(10,2);return(e=(Math.round(e*t)/t).toFixed(2)).toString()}}(t/1024)} MB`:`${Math.round(t)} kB`}return`${e} B`}var G=Object.defineProperty,H=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class J extends K{render(){const{thumbnail_url:e,action:t,url:r,isDragging:n,isRenaming:o,isSelected:s,isSelectable:i,isOver:l,isDeleting:a,showName:c,showSize:d,showModified:p,browserProps:h,connectDragPreview:m}=this.props;let u;u=e?f().createElement("div",{className:"image",style:{backgroundImage:"url("+e+")"}}):h.icons[this.getFileType()]||h.icons.File;const g=n||t,F=h.confirmDeletionRenderer;let b,w,y;c&&(b=!g&&a&&1===h.selection.length?f().createElement(F,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:r},this.getName()):!g&&o?f().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},f().createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):f().createElement("a",{href:r,download:"download",onClick:this.handleFileClick},this.getName())),d&&(o||a||(w=f().createElement("span",{className:"size"},f().createElement("small",null,W(this.props.size))))),p&&(o||a||(y=f().createElement("span",{className:"modified"},"Last modified: ",(0,_.formatDistanceToNow)(this.props.modified,{addSuffix:!0}))));let v={};i&&(v={onClick:this.handleItemClick});let D=f().createElement("li",((e,t)=>{for(var r in t||(t={}))V.call(t,r)&&U(e,r,t[r]);if(H)for(var r of H(t))Y.call(t,r)&&U(e,r,t[r]);return e})({className:S()("file",{pending:t,dragging:n,dragover:l,selected:s}),id:h.generateId&&h.generateId(this.props.fileKey),onDoubleClick:this.handleItemDoubleClick},v),f().createElement("div",{className:"item"},f().createElement("span",{className:"thumb"},u),f().createElement("span",{className:"name"},b),w,y));return"function"==typeof h.moveFile&&(D=m(D)),this.connectDND(D)}}((e,t,r)=>{U(e,t+"",{showName:!0,showSize:!0,showModified:!0,isSelectable:!0})})(J,"defaultProps");const Q=$()((0,u.DragSource)("file",I.dragSource,I.dragCollect),(0,u.DropTarget)(["file","folder",g.NativeTypes.FILE],I.targetSource,I.targetCollect))(J);var X=Object.defineProperty,Z=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class se extends f().Component{render(){return f().createElement(Q,(e=((e,t)=>{for(var r in t||(t={}))re.call(t,r)&&oe(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&oe(e,r,t[r]);return e})({},this.props),Z(e,ee({showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))));var e}}const ie=se;var le=Object.defineProperty,ae=(e,t,r)=>(((e,t,r)=>{t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ce extends f().Component{constructor(e){super(e),ae(this,"dateTimeFormats",(new Map).set("@distanceToNow",(e=>(0,_.formatDistanceToNow)(e,{addSuffix:!0})))),this.state={formats:e.formats.slice(0,2)}}getDateTime(e,t){return t?this.dateTimeFormats.has(t)?this.dateTimeFormats.get(t)(e):(0,_.format)(e,t):null}render(){const{modified:e}=this.props,{formats:t}=this.state,r=t[0]||"@distanceToNow",n=t[1],o=this.getDateTime(e,r)||"-",s=this.getDateTime(e,n);return f().createElement("div",{title:s,onClick:()=>{s&&this.setState((()=>({formats:[n,r]})))}},o)}}ae(ce,"propTypes",{formats:h().array,modified:h().number.isRequired});class de extends K{render(){const{isDragging:e,isDeleting:t,isRenaming:r,isOver:n,isSelected:o,action:s,url:i,browserProps:l,connectDragPreview:a,depth:c,size:d,modified:p,modifiedDateTime:h}=this.props,m=l.icons[this.getFileType()]||l.icons.File,u=e||s,g=l.confirmDeletionRenderer;let F;F=!u&&t&&1===l.selection.length?f().createElement(g,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:i},m,this.getName()):!u&&r?f().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},m,f().createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):f().createElement("a",{href:i||"#",download:"download",onClick:this.handleFileClick},m,this.getName());let b=f().createElement("div",null,F);"function"==typeof l.moveFile&&(b=a(b));const w=f().createElement("tr",{className:S()("file",{pending:s,dragging:e,dragover:n,selected:o}),id:l.generateId&&l.generateId(this.props.fileKey),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},f().createElement("td",{className:"name"},f().createElement("div",{style:{paddingLeft:16*c+"px"}},b)),f().createElement("td",{className:"size"},W(d)),f().createElement("td",{className:"modified"},void 0===p?"-":f().createElement(ce,{modified:p,formats:(null==h?void 0:h.formats)||[]})));return this.connectDND(w)}}const pe=$()((0,u.DragSource)("file",I.dragSource,I.dragCollect),(0,u.DropTarget)(["file","folder",g.NativeTypes.FILE],I.targetSource,I.targetCollect))(de);var he=Object.defineProperty,me=(e,t,r)=>(((e,t,r)=>{t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class fe extends f().Component{constructor(){super(...arguments),me(this,"state",{newName:this.props.isDraft?"New folder":this.getName()}),me(this,"handleFolderClick",(e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"folder",e.ctrlKey||e.metaKey,e.shiftKey)})),me(this,"handleFolderDoubleClick",(e=>{e.stopPropagation(),this.toggleFolder()})),me(this,"handleRenameClick",(e=>{this.props.browserProps.renameFolder&&this.props.browserProps.beginAction("rename",this.props.fileKey)})),me(this,"handleNewNameChange",(e=>{const t=e.target.value;this.setState({newName:t})})),me(this,"handleRenameSubmit",(e=>{if(e.preventDefault(),e.stopPropagation(),!this.props.browserProps.renameFolder&&!this.props.isDraft)return;const t=this.state.newName.trim();if(0===t.length)return;if(["/","\\"].some((e=>-1!==t.indexOf(e))))return;let r=this.props.fileKey.substr(0,this.props.fileKey.substr(0,this.props.fileKey.length-1).lastIndexOf("/"));r.length&&(r+="/"),r+=t,r+="/",this.props.isDraft?this.props.browserProps.createFolder(r):this.props.browserProps.renameFolder(this.props.fileKey,r)})),me(this,"handleDeleteClick",(e=>{this.props.browserProps.deleteFolder&&this.props.browserProps.beginAction("delete",this.props.fileKey)})),me(this,"handleDeleteSubmit",(e=>{e.preventDefault(),e.stopPropagation(),this.props.browserProps.deleteFolder&&this.props.browserProps.deleteFolder(this.props.browserProps.actionTargets)})),me(this,"handleCancelEdit",(e=>{this.props.browserProps.endAction()})),me(this,"toggleFolder",(()=>{this.props.browserProps.toggleFolder(this.props.fileKey)}))}selectFolderNameFromRef(e){if(e){const t=e.value;e.setSelectionRange(0,t.length),e.focus()}}getName(){if(this.props.name)return this.props.name;const e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}connectDND(e){const t=this.props.isDragging||this.props.action;return this.props.keyDerived&&("function"!=typeof this.props.browserProps.moveFolder||t||this.props.isRenaming||this.props.isDeleting||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFolder&&"function"!=typeof this.props.browserProps.moveFile||(e=this.props.connectDropTarget(e))),e}}me(fe,"propTypes",{name:h().string,fileKey:h().string,newName:h().string,keyDerived:h().bool,isDraft:h().bool,isRenaming:h().bool,isDeleting:h().bool,connectDragSource:h().func,connectDropTarget:h().func,isDragging:h().bool,action:h().string,browserProps:h().shape({nameFilter:h().string,select:h().func,toggleFolder:h().func,openFolder:h().func,beginAction:h().func,endAction:h().func,preview:h().func,createFiles:h().func,createFolder:h().func,moveFile:h().func,moveFolder:h().func,renameFolder:h().func,deleteFolder:h().func})});const ue={dragSource:{beginDrag:e=>(e.browserProps.selection.length||e.browserProps.select(e.fileKey,"folder"),{key:e.fileKey}),endDrag(e,t,r){k(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}},ge=fe;var Fe=Object.defineProperty,be=Object.defineProperties,we=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pe=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&Ee(e,r,t[r]);if(ye)for(var r of ye(t))De.call(t,r)&&Ee(e,r,t[r]);return e},Re=(e,t)=>be(e,we(t));class Ce extends ge{render(){const{isOpen:e,isDragging:t,isDeleting:r,isRenaming:n,isDraft:o,isOver:s,isSelected:i,url:l,action:a,browserProps:c,depth:d,keyDerived:p,connectDragPreview:h}=this.props,m=c.icons[e?"FolderOpen":"Folder"],u=t||a,g=c.confirmDeletionRenderer;let F,b;if(F=!u&&r&&1===c.selection.length?f().createElement(g,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:l},this.getName()):!u&&n||o?f().createElement("div",null,f().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},f().createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):f().createElement("div",null,f().createElement("a",{onClick:this.toggleFolder},this.getName())),e&&c.nestChildren){b=[];for(let e=0;e<b.length;e++){const t=b[e],r=Re(Pe({},c.getItemProps(t,c)),{depth:d+1});N(t)?b.push(f().createElement(c.folderRenderer,Pe(Re(Pe(Pe({},t),r),{browserProps:c}),c.folderRendererProps))):b.push(f().createElement(c.fileRenderer,Pe(Re(Pe(Pe({},t),r),{browserProps:c}),c.fileRendererProps)))}b=b.length?f().createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},b):f().createElement("p",null,"No items in this folder")}let w=f().createElement("li",{className:S()("folder",{expanded:e&&c.nestChildren,pending:a,dragging:t,dragover:s,selected:i}),id:c.generateId&&c.generateId(this.props.fileKey),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},f().createElement("div",{className:"item"},f().createElement("span",{className:"thumb"},m),f().createElement("span",{className:"name"},F)),b);return"function"==typeof c.moveFolder&&p&&(w=h(w)),this.connectDND(w)}}const Se=$()((0,u.DragSource)("folder",ue.dragSource,ue.dragCollect),(0,u.DropTarget)(["file","folder",g.NativeTypes.FILE],I.targetSource,I.targetCollect))(Ce);class Ne extends ge{render(){const{isOpen:e,isDragging:t,isDeleting:r,isRenaming:n,isDraft:o,isOver:s,isSelected:i,action:l,url:a,browserProps:c,connectDragPreview:d,depth:p}=this.props,h=c.icons[e?"FolderOpen":"Folder"],m=t||l,u=c.confirmDeletionRenderer;let g;g=!m&&r&&1===c.selection.length?f().createElement(u,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:a},h,this.getName()):!m&&n||o?f().createElement("div",null,f().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h,f().createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):f().createElement("div",null,f().createElement("a",{onClick:this.toggleFolder},h,this.getName()));let F=f().createElement("div",null,g);"function"==typeof c.moveFile&&(F=d(F));const b=f().createElement("tr",{className:S()("folder",{pending:l,dragging:t,dragover:s,selected:i}),id:c.generateId&&c.generateId(this.props.fileKey),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},f().createElement("td",{className:"name"},f().createElement("div",{style:{paddingLeft:16*p+"px"}},F)),f().createElement("td",null),f().createElement("td",null));return this.connectDND(b)}}const ke=$()((0,u.DragSource)("folder",ue.dragSource,ue.dragCollect),(0,u.DropTarget)(["file","folder",g.NativeTypes.FILE],I.targetSource,I.targetCollect))(Ne),Oe=e=>{const{children:t,handleDeleteSubmit:r,handleFileClick:n,url:o}=e;return f().createElement("form",{className:"deleting",onSubmit:r},f().createElement("a",{href:o,download:"download",onClick:n},t),f().createElement("div",null,f().createElement("button",{type:"submit"},"Confirm Deletion")))};Oe.propTypes={children:h().node,handleDeleteSubmit:h().func,handleFileClick:h().func,url:h().string},Oe.defaultProps={url:"#"};const Te=Oe,Ae=e=>{const{handleDeleteSubmit:t}=e;return f().createElement("button",{className:"deleting",onClick:t},"Confirm Deletion")};Ae.propTypes={handleDeleteSubmit:h().func};const je=Ae;var Me=Object.defineProperty,xe=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,qe=(e,t,r)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))Be.call(t,r)&&qe(e,r,t[r]);if(Ke)for(var r of Ke(t))Le.call(t,r)&&qe(e,r,t[r]);return e},ze=(e,t)=>xe(e,Ie(t));function $e(e,t){const r={contents:[],children:{}};return e.map((e=>{e.relativeKey=(e.newKey||e.key).substr(t.length);let n=r;const o=e.relativeKey.split("/");o.map(((t,r)=>{if(r===o.length-1&&N(e))for(const t in e)n[t]=e[t];""!==t&&(N(e)||r!==o.length-1?(t in n.children==0&&(n.children[t]={contents:[],children:{}}),n=n.children[t]):n.contents.push(ze(_e({},e),{keyDerived:!0})))}))})),e=function e(r,n){""!==n&&(n+="/");let o=[];for(const s in r.children)o.push(ze(_e({},r.children[s]),{contents:void 0,keyDerived:!0,key:t+n+s+"/",relativeKey:n+s+"/",children:e(r.children[s],n+s),size:0}));return o=o.concat(r.contents),o}(r,"")}var We=Object.defineProperty,Ge=Object.defineProperties,He=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Je=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qe=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Je(e,r,t[r]);if(Ve)for(var r of Ve(t))Ue.call(t,r)&&Je(e,r,t[r]);return e},Xe=(e,t)=>Ge(e,He(t));function Ze(e,t){const r=function(){const e=[],t=new Date;return e.push({name:"Today",begins:(0,_.startOfToday)(),ends:(0,_.endOfToday)(),items:[]}),e.push({name:"Yesterday",begins:(0,_.startOfYesterday)(),ends:(0,_.endOfYesterday)(),items:[]}),e.push({name:"Earlier this Week",begins:(0,_.startOfWeek)(t),ends:(0,_.endOfWeek)(t),items:[]}),e.push({name:"Last Week",begins:(0,_.startOfWeek)((0,_.addWeeks)(t,-1)),ends:(0,_.endOfWeek)((0,_.addWeeks)(t,-1)),items:[]}),(0,_.getMonth)(e[e.length-1].begins)===(0,_.getMonth)(t)&&e.push({name:"Earlier this Month",begins:(0,_.startOfMonth)(t),ends:(0,_.endOfMonth)(t),items:[]}),e}();for(let t=0;t<e.length;t++){const n=e[t];if(N(n))continue;const o=Xe(Qe({},n),{keyDerived:!0});let s=!1;const i=+o.modified;for(let e=0;e<r.length;e++){const t=r[e];if(i>+t.begins&&i<=+t.ends){t.items.push(o),s=!0;break}}if(!s){const e={name:(0,_.format)(o.modified,"MMMM yyyy"),begins:(0,_.startOfMonth)(o.modified),ends:(0,_.endOfMonth)(o.modified),items:[]};e.items.push(o),r.push(e)}}const n=[];for(let e=0;e<r.length;e++){const t=r[e];t.items.length&&n.push({key:`${t.name.toLowerCase().replace(" ","_")}/`,name:t.name,children:t.items,size:0})}return n}const et=/(-?\d*\.?\d+)/g;function tt(e,t){const r=String(e.name).split(et),n=String(t.name).split(et),o=Math.min(r.length,n.length);for(let e=0;e<o;e++){const t=parseFloat(r[e])||r[e].toLowerCase(),o=parseFloat(n[e])||n[e].toLowerCase();if(t<o)return-1;if(t>o)return 1}return 0}function rt(e,t){return e.draft&&!t.draft?1:t.draft&&!e.draft?-1:tt(e,t)}function nt(e){let t=[],r=[];for(let n=0;n<e.length;n++){const o=e[n],s=(o.newKey||o.key).split("/");o.children?(o.name||(o.name=s[s.length-2]),t.push(o)):(o.name||(o.name=s[s.length-1]),r.push(o))}r=r.sort(tt),t=t.sort(rt);for(let e=0;e<t.length;e++){const r=t[e];r.children=nt(r.children)}let n=[];return n=n.concat(t),n=n.concat(r),n}function ot(e){return nt(e)}function st(e){const t=[];let r=[];for(let n=0;n<e.length;n++){const o=e[n],s=(o.newKey||o.key).split("/");o.children?t.push(o):(o.name=s[s.length-1],r.push(o))}r=r.sort(_.compareAsc);for(let e=0;e<t.length;e++){const r=t[e];r.children=st(r.children)}let n=[];return n=n.concat(t),n=n.concat(r),n}function it(e){return st(e)}const lt=e=>{const{selectedItems:t,isFolder:r,icons:n,nameFilter:o,canCreateFolder:s,onCreateFolder:i,canRenameFile:l,onRenameFile:a,canRenameFolder:c,onRenameFolder:d,canDeleteFile:p,onDeleteFile:h,canDeleteFolder:m,onDeleteFolder:u,canDownloadFile:g,onDownloadFile:F,canDownloadFolder:b,onDownloadFolder:w}=e;let y=[];if(t.length){const e=t.filter((e=>e.action));if(e.length===t.length&&1===[...new Set(e)].length){let t;switch(e[0].action){case"delete":t="Deleting ...";break;case"rename":t="Renaming ...";break;default:t="Moving ..."}y=f().createElement("div",{className:"item-actions"},n.Loading," ",t)}else{r&&s&&!o&&y.push(f().createElement("li",{key:"action-add-folder"},f().createElement("a",{onClick:i,href:"#",role:"button"},n.Folder," Add Subfolder")));const e=t.find((e=>!e.keyDerived));e||r||!l||1!==t.length?!e&&r&&c&&y.push(f().createElement("li",{key:"action-rename"},f().createElement("a",{onClick:d,href:"#",role:"button"},n.Rename," Rename"))):y.push(f().createElement("li",{key:"action-rename"},f().createElement("a",{onClick:a,href:"#",role:"button"},n.Rename," Rename"))),e||r||!p?!e&&r&&m&&y.push(f().createElement("li",{key:"action-delete"},f().createElement("a",{onClick:u,href:"#",role:"button"},n.Delete," Delete"))):y.push(f().createElement("li",{key:"action-delete"},f().createElement("a",{onClick:h,href:"#",role:"button"},n.Delete," Delete"))),(!r&&g||r&&b)&&y.push(f().createElement("li",{key:"action-download"},f().createElement("a",{onClick:r?w:F,href:"#",role:"button"},n.Download," Download"))),y=y.length?f().createElement("ul",{className:"item-actions"},y):f().createElement("div",{className:"item-actions"}," ")}}else s&&!o&&y.push(f().createElement("li",{key:"action-add-folder"},f().createElement("a",{onClick:i,href:"#",role:"button"},n.Folder," Add Folder"))),y=y.length?f().createElement("ul",{className:"item-actions"},y):f().createElement("div",{className:"item-actions"}," ");return y};lt.propTypes={selectedItems:h().arrayOf(h().object),isFolder:h().bool,icons:h().object,nameFilter:h().string,canCreateFolder:h().bool,onCreateFolder:h().func,canRenameFile:h().bool,onRenameFile:h().func,canRenameFolder:h().bool,onRenameFolder:h().func,canDeleteFile:h().bool,onDeleteFile:h().func,canDeleteFolder:h().bool,onDeleteFolder:h().func,canDownloadFile:h().bool,onDownloadFile:h().func,canDownloadFolder:h().bool,onDownloadFolder:h().func},lt.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null};const at=lt;var ct=Object.defineProperty;class dt extends f().Component{render(){const{filter:e,actions:t}=this.props;return f().createElement("div",{className:"action-bar"},e,t)}}((e,t,r)=>{((e,t,r)=>{t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,t+"",r)})(dt,"propTypes",{filter:h().element,actions:h().element});var pt=Object.defineProperty,ht=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,Ft=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bt=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&Ft(e,r,t[r]);if(ft)for(var r of ft(t))gt.call(t,r)&&Ft(e,r,t[r]);return e},wt=(e,t)=>ht(e,mt(t)),yt=(e,t,r)=>(Ft(e,"symbol"!=typeof t?t+"":t,r),r);const vt=/.*\/__new__[/]?$/gm;function Dt(e,t){return{key:`file-${e.key}`,fileKey:e.key,isSelected:t.selection.includes(e.key),isOpen:e.key in t.openFolders||t.assumeOpenOnFilter&&t.nameFilter,isRenaming:"rename"===t.activeAction&&t.actionTargets.includes(e.key),isDeleting:"delete"===t.activeAction&&t.actionTargets.includes(e.key),isDraft:!!e.draft}}class Et extends f().Component{constructor(){super(...arguments),yt(this,"state",{openFolders:{},selection:[],activeAction:null,actionTargets:[],nameFilter:"",searchResultsShown:this.props.searchResultsPerPage,previewFile:null,addFolder:null}),yt(this,"getFile",(e=>{let t=!1;return this.props.files.find((r=>(r.key.startsWith(e)&&(t=!0),r.key===e)))||(t?{key:e,modified:0,size:0,relativeKey:e}:void 0)})),yt(this,"createFiles",((e,t)=>{this.setState((e=>{const r={selection:[]};return t&&(r.openFolders=wt(bt({},e.openFolders),{[t]:!0})),r}),(()=>{this.props.onCreateFiles(e,t)}))})),yt(this,"createFolder",(e=>{this.setState({activeAction:null,actionTargets:[],selection:[e]},(()=>{this.props.onCreateFolder(e)}))})),yt(this,"moveFile",((e,t)=>{this.setState({activeAction:null,actionTargets:[],selection:[t]},(()=>{this.props.onMoveFile(e,t)}))})),yt(this,"moveFolder",((e,t)=>{this.setState((r=>{const n={activeAction:null,actionTargets:[],selection:[t]};return e in r.openFolders&&(n.openFolders=wt(bt({},r.openFolders),{[t]:!0})),n}),(()=>{this.props.onMoveFolder(e,t)}))})),yt(this,"renameFile",((e,t)=>{this.setState({activeAction:null,actionTargets:[],selection:[t]},(()=>{this.props.onRenameFile(e,t)}))})),yt(this,"renameFolder",((e,t)=>{this.setState((r=>{const n={activeAction:null,actionTargets:[]};return r.selection[0].substr(0,e.length)===e&&(n.selection=[r.selection[0].replace(e,t)]),e in r.openFolders&&(n.openFolders=wt(bt({},r.openFolders),{[t]:!0})),n}),(()=>{this.props.onRenameFolder(e,t)}))})),yt(this,"deleteFile",(e=>{this.setState({activeAction:null,actionTargets:[],selection:[]},(()=>{this.props.onDeleteFile(e)}))})),yt(this,"deleteFolder",(e=>{this.setState((t=>{const r={activeAction:null,actionTargets:[],selection:[]};return e in t.openFolders&&(r.openFolders=bt({},t.openFolders),delete r.openFolders[e]),r}),(()=>{this.props.onDeleteFolder(e)}))})),yt(this,"downloadFile",(e=>{this.setState({activeAction:null,actionTargets:[]},(()=>{this.props.onDownloadFile(e)}))})),yt(this,"downloadFolder",(e=>{this.setState({activeAction:null,actionTargets:[]},(()=>{this.props.onDownloadFolder(e)}))})),yt(this,"beginAction",((e,t)=>{this.setState({activeAction:e,actionTargets:t||[]})})),yt(this,"endAction",(()=>{this.state.selection&&this.state.selection.length>0&&this.state.selection.filter((e=>e.match(vt))).length>0&&this.setState({selection:[]}),this.beginAction(null,null)})),yt(this,"select",((e,t,r,n)=>{const{actionTargets:o}=this.state,s=o.length&&!o.includes(e),i=this.getFile(e);let l=[e];if(r||n){const t=this.state.selection.indexOf(e);l=-1!==t?[...this.state.selection.slice(0,t),...this.state.selection.slice(t+1)]:[...this.state.selection,e]}this.setState((e=>({selection:l,actionTargets:s?[]:o,activeAction:s?null:e.activeAction})),(()=>{this.props.onSelect(i),"file"===t&&this.props.onSelectFile(i),"folder"===t&&this.props.onSelectFolder(i)}))})),yt(this,"preview",(e=>{this.state.previewFile&&this.state.previewFile.key!==e.key&&this.closeDetail(),this.setState({previewFile:e},(()=>{this.props.onPreviewOpen(e)}))})),yt(this,"closeDetail",(()=>{this.setState({previewFile:null},(()=>{this.props.onPreviewClose(this.state.previewFile)}))})),yt(this,"handleShowMoreClick",(e=>{e.preventDefault(),this.setState((e=>({searchResultsShown:e.searchResultsShown+this.props.searchResultsPerPage})))})),yt(this,"toggleFolder",(e=>{const t=e in this.state.openFolders;this.setState((r=>{const n={openFolders:bt({},r.openFolders)};return t?delete n.openFolders[e]:n.openFolders[e]=!0,n}),(()=>{const r=t?"onFolderClose":"onFolderOpen";this.props[r](this.getFile(e),this.getBrowserProps())}))})),yt(this,"openFolder",(e=>{this.setState((t=>({openFolders:wt(bt({},t.openFolders),{[e]:!0})})),(()=>{this.props.onFolderOpen(this.getFile(e),this.getBrowserProps())}))})),yt(this,"setOpenFolders",(e=>{this.setState((t=>({openFolders:e.reduce(((e,t)=>wt(bt({},e),{[t]:!0})),{})})))})),yt(this,"handleGlobalClick",(e=>{this.browserRef&&this.browserRef.contains(e.target)||this.setState({selection:[],actionTargets:[],activeAction:null})})),yt(this,"handleActionBarRenameClick",(e=>{e.preventDefault(),this.beginAction("rename",this.state.selection)})),yt(this,"handleActionBarDeleteClick",(e=>{e.preventDefault(),this.beginAction("delete",this.state.selection)})),yt(this,"handleActionBarAddFolderClick",(e=>{e.preventDefault(),"createFolder"!==this.state.activeAction&&this.setState((e=>{let t="";e.selection&&e.selection.length>0&&(t+=e.selection,"/"!==t.substr(t.length-1,t.length)&&(t+="/")),"__new__/"===t||t.endsWith("/__new__/")||(t+="__new__/");const r={actionTargets:[t],activeAction:"createFolder",selection:[t]};return e.selection&&e.selection.length>0&&(r.openFolders=wt(bt({},e.openFolders),{[this.state.selection]:!0})),r}))})),yt(this,"handleActionBarDownloadClick",(e=>{e.preventDefault();const t=this.getFiles(),r=this.getSelectedItems(t);1===r.length&&N(r[0])?this.downloadFolder(this.state.selection):this.downloadFile(this.state.selection)})),yt(this,"updateFilter",(e=>{this.setState({nameFilter:e,searchResultsShown:this.props.searchResultsPerPage})})),yt(this,"handleMultipleDeleteSubmit",(()=>{console.log(this),this.deleteFolder(this.state.selection.filter((e=>"/"===e[e.length-1]))),this.deleteFile(this.state.selection.filter((e=>"/"!==e[e.length-1])))}))}componentDidMount(){"table"===this.props.renderStyle&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick)}componentWillUnmount(){window.removeEventListener("click",this.handleGlobalClick)}getBrowserProps(){return{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,assumeOpenOnFilter:this.props.assumeOpenOnFilter,generateId:this.props.generateId,openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,preview:this.preview,updateFilter:this.updateFilter,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,getItemProps:Dt}}renderActionBar(e){const{icons:t,canFilter:r,filterRendererProps:n,filterRenderer:o,actionBarRenderer:s,actionRenderer:i,onCreateFolder:l,onRenameFile:a,onRenameFolder:c,onDeleteFile:d,onDeleteFolder:p,onDownloadFile:h,onDownloadFolder:m}=this.props,u=this.getBrowserProps(),g=1===e.length&&N(e[0]);let F;r&&(F=f().createElement(o,bt({value:this.state.nameFilter,updateFilter:this.updateFilter},n)));const b=f().createElement(i,{browserProps:u,selectedItems:e,isFolder:g,icons:t,nameFilter:this.state.nameFilter,canCreateFolder:"function"==typeof l,onCreateFolder:this.handleActionBarAddFolderClick,canRenameFile:"function"==typeof a,onRenameFile:this.handleActionBarRenameClick,canRenameFolder:"function"==typeof c,onRenameFolder:this.handleActionBarRenameClick,canDeleteFile:"function"==typeof d,onDeleteFile:this.handleActionBarDeleteClick,canDeleteFolder:"function"==typeof p,onDeleteFolder:this.handleActionBarDeleteClick,canDownloadFile:"function"==typeof h,onDownloadFile:this.handleActionBarDownloadClick,canDownloadFolder:"function"==typeof m,onDownloadFolder:this.handleActionBarDownloadClick});return f().createElement(s,{filter:F,actions:b})}renderFiles(e,t){const{fileRenderer:r,fileRendererProps:n,folderRenderer:o,folderRendererProps:s,flattenFilterResults:i}=this.props,l=this.getBrowserProps();let a=[];return e.map((e=>{const c=wt(bt({},l.getItemProps(e,l)),{depth:this.state.nameFilter&&i?0:t});N(e)?(!this.props.showFoldersOnFilter&&this.state.nameFilter||a.push(f().createElement(o,bt(wt(bt(bt({},e),c),{browserProps:l}),s))),(this.state.nameFilter||c.isOpen&&!l.nestChildren)&&(a=a.concat(this.renderFiles(e.children,t+1)))):a.push(f().createElement(r,bt(wt(bt(bt({},e),c),{browserProps:l}),n)))})),a}getFiles(){let e=this.props.files.concat([]);if("createFolder"===this.state.activeAction&&e.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter&&(e=this.props.getFilteredFiles(this.state.nameFilter,e)),"function"==typeof this.props.group)e=this.props.group(e,"");else{const t=[];e.map((e=>{N(e)||t.push(e)})),e=t}return"function"==typeof this.props.sort&&(e=this.props.sort(e)),e}getSelectedItems(e){const{selection:t}=this.state,r=[],n=e=>{t.includes(e.key)&&r.push(e),e.children&&e.children.map(n)};return e.map(n),r}render(){const e={browserProps:this.getBrowserProps(),fileKey:"",fileCount:this.props.files.length};let t;const r=this.getFiles(),n=this.getSelectedItems(r);let o,s=this.renderFiles(r,0);switch(this.props.renderStyle){case"table":if(s.length){if(this.state.nameFilter){const e=s.length;s=s.slice(0,this.state.searchResultsShown),e>s.length&&s.push(f().createElement("tr",{key:"show-more",className:"show-more-row"},f().createElement("td",{colSpan:100},f().createElement("a",{onClick:this.handleShowMoreClick,href:"#",className:"show-more"},this.props.showMoreResults))))}}else s=this.state.nameFilter?f().createElement("tr",null,f().createElement("td",{colSpan:100},this.props.noMatchingFilesMessage(this.state.nameFilter))):f().createElement("tr",null,f().createElement("td",{colSpan:100},this.props.noFilesMessage));this.props.headerRenderer&&(o=f().createElement("thead",null,f().createElement(this.props.headerRenderer,bt(bt({},e),this.props.headerRendererProps)))),t=f().createElement("table",{cellSpacing:"0",cellPadding:"0"},o,f().createElement("tbody",null,s));break;case"list":if(s.length){let e;if(this.state.nameFilter){const t=s.length;s=s.slice(0,this.state.searchResultsShown),t>s.length&&(e=f().createElement("a",{onClick:this.handleShowMoreClick,href:"#",className:"show-more"},this.props.showMoreResults))}s=f().createElement("div",null,f().createElement("ul",null,s),e)}else s=this.state.nameFilter?f().createElement("p",{className:"empty"},this.props.noMatchingFilesMessage(this.state.nameFilter)):f().createElement("p",{className:"empty"},this.props.noFilesMessage);this.props.headerRenderer&&(o=f().createElement(this.props.headerRenderer,bt(bt({},e),this.props.headerRendererProps))),t=f().createElement("div",null,o,s)}const i=this.props.confirmMultipleDeletionRenderer;return f().createElement("div",{className:"rendered-react-keyed-file-browser"},this.props.actions,f().createElement("div",{className:"rendered-file-browser",ref:e=>{this.browserRef=e}},this.props.showActionBar&&this.renderActionBar(n),"delete"===this.state.activeAction&&this.state.selection.length>1&&f().createElement(i,{handleDeleteSubmit:this.handleMultipleDeleteSubmit}),f().createElement("div",{className:"files"},t)),null!==this.state.previewFile&&f().createElement(this.props.detailRenderer,bt({file:this.state.previewFile,close:this.closeDetail},this.props.detailRendererProps)))}}yt(Et,"propTypes",{files:h().arrayOf(h().shape({key:h().string.isRequired,modified:h().number,size:h().number})).isRequired,actions:h().node,showActionBar:h().bool.isRequired,canFilter:h().bool.isRequired,showFoldersOnFilter:h().bool,noFilesMessage:h().oneOfType([h().string,h().object]),noMatchingFilesMessage:h().func,showMoreResults:h().oneOfType([h().string,h().object]),getFilteredFiles:h().func,flattenFilterResults:h().bool,assumeOpenOnFilter:h().bool,searchResultsPerPage:h().number,group:h().func.isRequired,sort:h().func.isRequired,generateId:h().func,icons:h().shape({Folder:h().element,FolderOpen:h().element,File:h().element,PDF:h().element,Image:h().element,Delete:h().element,Rename:h().element,Loading:h().element,Download:h().element}),nestChildren:h().bool.isRequired,renderStyle:h().oneOf(["list","table"]).isRequired,startOpen:h().bool.isRequired,headerRenderer:h().func,headerRendererProps:h().object,filterRenderer:h().func,filterRendererProps:h().object,fileRenderer:h().func,fileRendererProps:h().object,folderRenderer:h().func,folderRendererProps:h().object,detailRenderer:h().func,detailRendererProps:h().object,actionRenderer:h().func,actionBarRenderer:h().func,confirmDeletionRenderer:h().func,confirmMultipleDeletionRenderer:h().func,onCreateFiles:h().oneOfType([h().func,h().bool]),onCreateFolder:h().oneOfType([h().func,h().bool]),onMoveFile:h().oneOfType([h().func,h().bool]),onMoveFolder:h().oneOfType([h().func,h().bool]),onRenameFile:h().oneOfType([h().func,h().bool]),onRenameFolder:h().oneOfType([h().func,h().bool]),onDeleteFile:h().oneOfType([h().func,h().bool]),onDeleteFolder:h().oneOfType([h().func,h().bool]),onDownloadFile:h().oneOfType([h().func,h().bool]),onDownloadFolder:h().oneOfType([h().func,h().bool]),onSelect:h().func,onSelectFile:h().func,onSelectFolder:h().func,onPreviewOpen:h().func,onPreviewClose:h().func,onFolderOpen:h().func,onFolderClose:h().func}),yt(Et,"defaultProps",{showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,noFilesMessage:"No files.",noMatchingFilesMessage:e=>`No files matching "${e}".`,showMoreResults:"Show more results",getFilteredFiles:R,flattenFilterResults:!0,assumeOpenOnFilter:!0,searchResultsPerPage:20,group:$e,sort:ot,generateId:void 0,nestChildren:!1,renderStyle:"table",startOpen:!1,headerRenderer:q,headerRendererProps:{},filterRenderer:P,filterRendererProps:{},fileRenderer:pe,fileRendererProps:{modifiedDateTime:{formats:["@distanceToNow"]}},folderRenderer:ke,folderRendererProps:{},detailRenderer:y,detailRendererProps:{},actionRenderer:at,actionBarRenderer:dt,confirmDeletionRenderer:Te,confirmMultipleDeletionRenderer:je,icons:{},onSelect:e=>{},onSelectFile:e=>{},onSelectFolder:e=>{},onPreviewOpen:e=>{},onPreviewClose:e=>{},onFolderOpen:e=>{},onFolderClose:e=>{}});const Pt=f().forwardRef(((e,t)=>f().createElement(u.DndProvider,{backend:g.HTML5Backend},f().createElement(Et,bt({ref:t},e))))),Rt=e=>{const t=4===e?"fa":"fas",r=4===e?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'];let n=!1;const o=document.createElement("span");var s;return o.className=t,o.style.display="none",document.body.insertBefore(o,document.body.firstChild),r.includes((s=o,"font-family",window.getComputedStyle(s,null).getPropertyValue("font-family")))?n=!0:console.warn(`Font Awesome ${e} was not detected but Font Awesome ${e} icons have been requested for \`react-object-list\``),document.body.removeChild(o),n},Ct=(e=4)=>{switch(e){case 4:return Rt(4),{File:f().createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:f().createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:f().createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:f().createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:f().createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:f().createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:f().createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:f().createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:f().createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:f().createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:f().createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:f().createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:f().createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:f().createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:f().createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:f().createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return Rt(5),{File:f().createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:f().createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:f().createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:f().createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:f().createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:f().createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:f().createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:f().createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:f().createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:f().createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:f().createElement("i",{className:"fas fa-i-cursor","aria-hidden":"true"}),Folder:f().createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:f().createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:f().createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:f().createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:f().createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn(`Could not find config for version ${e}`,"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}},St=Pt;return t})()));